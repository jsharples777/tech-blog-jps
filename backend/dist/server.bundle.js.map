{"version":3,"file":"server.bundle.js","mappings":"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","sources":["webpack://backend/./src/db/connection.ts","webpack://backend/./src/models/blogentry.ts","webpack://backend/./src/models/comment.ts","webpack://backend/./src/models/index.ts","webpack://backend/./src/models/user.ts","webpack://backend/./src/passport/passport.ts","webpack://backend/./src/routes/api.js","webpack://backend/./src/routes/auth.js","webpack://backend/./src/routes/index.js","webpack://backend/./src/util/SocketManager.ts","webpack://backend/external \"bcrypt-nodejs\"","webpack://backend/external \"body-parser\"","webpack://backend/external \"connect-flash\"","webpack://backend/external \"connect-session-sequelize\"","webpack://backend/external \"cookie-parser\"","webpack://backend/external \"debug\"","webpack://backend/external \"dotenv\"","webpack://backend/external \"express\"","webpack://backend/external \"express-handlebars\"","webpack://backend/external \"express-session\"","webpack://backend/external \"http\"","webpack://backend/external \"http-errors\"","webpack://backend/external \"moment\"","webpack://backend/external \"morgan\"","webpack://backend/external \"passport\"","webpack://backend/external \"passport-local\"","webpack://backend/external \"path\"","webpack://backend/external \"sequelize\"","webpack://backend/external \"serve-favicon\"","webpack://backend/external \"socket.io\"","webpack://backend/webpack/bootstrap","webpack://backend/./src/server.js"],"sourcesContent":["//const Sequelize = require(\"sequelize\");\n//const dotenv = require('dotenv').config();\nimport Sequelize = require(\"sequelize\");\nimport dotenv = require('dotenv');\n\ndotenv.config();\n\n// @ts-ignore\nconst sequelize = new Sequelize(process.env.DB_NAME, process.env.DB_USER, process.env.DB_PW, {\n    host: process.env.DB_HOST,\n    dialect: 'mysql',\n    dialectOptions: {\n        decimalNumbers: true,\n    },\n});\n\n//module.exports = sequelize;\nexport = sequelize;\n","import { Model, DataTypes }  from 'sequelize';\nimport sequelize from '../db/connection';\nimport User from './user';\n\nclass BlogEntry extends Model {}\n\nBlogEntry.init({\n    id: {\n        autoIncrement: true,\n        primaryKey: true,\n        type: DataTypes.INTEGER\n    },\n\n    title: {\n        type: DataTypes.STRING,\n        allowNull:false\n    },\n\n    content: {\n        type: DataTypes.STRING\n    },\n\n    createdBy: {\n        type: DataTypes.INTEGER,\n        references: {\n            model:User,\n            key:\"id\"\n        }\n    },\n    changedOn: {\n        type: DataTypes.BIGINT,\n        allowNull:false\n    }\n\n},\n    {\n        sequelize,\n        timestamps: false,\n        freezeTableName: true,\n        underscored: true,\n        modelName: 'blogentry',\n    });\n\nexport = BlogEntry;\n","import { Model, DataTypes }  from 'sequelize';\nimport sequelize from '../db/connection';\nimport User from './user';\nimport BlogEntry from \"./blogentry\";\n\nclass Comment extends Model {}\n\nComment.init({\n        id: {\n            autoIncrement: true,\n            primaryKey: true,\n            type: DataTypes.INTEGER\n        },\n        content: {\n            type: DataTypes.STRING\n        },\n\n        createdBy: {\n            type: DataTypes.INTEGER,\n            references: {\n                model: User,\n                key: \"id\"\n            }\n        },\n\n        commentOn: {\n            type: DataTypes.INTEGER,\n            references: {\n                model: BlogEntry,\n                key: \"id\"\n            },\n        },\n\n        changedOn: {\n            type: DataTypes.BIGINT,\n            allowNull: false\n        }\n    },\n    {\n        sequelize,\n        timestamps: false,\n        freezeTableName: true,\n        underscored: true,\n        modelName: 'comment',\n    });\n\nexport = Comment;\n","import User = require('./user');\nimport BlogEntry = require('./blogentry');\nimport Comment = require('./comment');\n\nUser.hasMany(BlogEntry,{foreignKey: 'createdBy'});\nUser.hasMany(Comment,{foreignKey: 'createdBy'});\nBlogEntry.hasMany(Comment, {foreignKey: 'commentOn', onDelete:'cascade'});\n\nBlogEntry.belongsTo(User,{foreignKey: 'createdBy'})\n\nexport = {User,BlogEntry,Comment};","import { Model, DataTypes }  from 'sequelize';\nimport sequelize from '../db/connection';\n\nclass User extends Model {}\n\nUser.init({\n\n    id: {\n        autoIncrement: true,\n        primaryKey: true,\n        type: DataTypes.INTEGER\n    },\n\n    username: {\n        type: DataTypes.TEXT\n    },\n\n    password: {\n        type: DataTypes.STRING,\n        allowNull: false\n    },\n\n    last_login: {\n        type: DataTypes.DATE\n    },\n\n    status: {\n        type: DataTypes.ENUM('active', 'inactive'),\n        defaultValue: 'active'\n    }},\n    {\n        sequelize,\n        timestamps: false,\n        freezeTableName: true,\n        underscored: true,\n        modelName: 'user',\n    });\n\n\n//module.exports = User;\nexport = User;\n\n","import bCrypt from 'bcrypt-nodejs';\nimport socketManager from '../util/SocketManager';\nimport User from '../models/user';\nimport {Request} from \"express\";\n\n\n// @ts-ignore\nfunction setupPassport(passport:any, user:User) {\n    const User = user;\n    const LocalStrategy = require('passport-local').Strategy;\n\n    // Register strategy\n    passport.use('local-register', new LocalStrategy(\n        {\n            usernameField: 'username',\n            passwordField: 'password',\n            passReqToCallback: true // allows us to pass back the entire request to the callback\n        },\n        function (req:Request, username:string, password:string, done:any) {\n            const generateHash = function (password:string):string {\n                return bCrypt.hashSync(password, bCrypt.genSaltSync(8));\n            };\n\n\n\n            // @ts-ignore\n            User.findOne({\n                where: {\n                    username: username\n                }\n            }).then(function (user:User) {\n                if (user) {\n                    return done(null, false, {\n                        message: 'That username is already taken'\n                    });\n                } else {\n                    const userPassword = generateHash(password);\n                    const data =\n                        {\n                            username: username,\n                            password: userPassword,\n                        };\n\n                    // @ts-ignore\n                    User.create(data).then(function (newUser:User) {\n                        // @ts-ignore\n                        User.findOne({\n                            where: {\n                                username: username\n                            }\n                        }).then(function (user:User) {\n                            // @ts-ignore\n                            let message = {\n                                type: \"create\",\n                                objectType: \"User\",\n                                data: user,\n                                user: user.id\n                            }\n                            socketManager.sendMessage(message);\n\n                        });\n                        if (!newUser) {\n                            return done(null, false);\n                        }\n                        if (newUser) {\n                            return done(null, newUser);\n\n                        }\n                    });\n                }\n            });\n        }\n    ));\n\n    // Login strategy\n    passport.use('local-login', new LocalStrategy(\n        {\n            usernameField: 'username',\n            passwordField: 'password',\n            passReqToCallback: true // allows us to pass back the entire request to the callback\n        },\n        function(req:Request, username:string, password:string, done:any) {\n\n            const User = user;\n\n            const isValidPassword = function(hashedPassword:string, password:string):boolean {\n                return bCrypt.compareSync(password, hashedPassword);\n            }\n\n            // @ts-ignore\n            User.findOne({\n                where: {\n                    username: username\n                }\n            }).then(function(user:User) {\n                if (!user) {\n                    return done(null, false, {\n                        message: 'Username and/or password is incorrect'\n                    });\n                }\n\n                // @ts-ignore\n                if (!isValidPassword(user.password, password)) {\n                    return done(null, false, {\n                        message: 'Username and/or password is incorrect'\n                    });\n                }\n\n                const userinfo = user.get();\n                return done(null, userinfo);\n            }).catch(function(err:Error) {\n                return done(err);\n            });\n        }\n    ));\n\n    //serialize\n    passport.serializeUser(function(user:User, done:any) {\n        done(null, user.id);\n    });\n\n\n    // deserialize user\n    passport.deserializeUser(function(id:number, done:any) {\n        User.findByPk(id).then(function(user:User) {\n            if (user) {\n                done(null, user.get());\n            } else {\n                done(user.errors, null);\n            }\n        });\n    });\n}\n\nexport = setupPassport;","const express = require('express');\nconst debug = require('debug')('api');\nconst {User,BlogEntry,Comment} = require('../models');\nconst moment = require('moment');\nconst socketManager = require('../util/SocketManager');\n\nconst router = express.Router();\n\n/* Comments API -\n*    comments are retrieved with the tech blog entries, but we need to supply\n*    API calls for creating and deleting.\n* */\nrouter.post('/comment', (req,res) => {\n    debug('Creating a Comment');\n\n    const changedOn = parseInt(moment().format(\"YYYYMMDDHHmmss\"));\n    req.body[\"changedOn\"] = changedOn;\n    debug(req.body);\n    Comment.create(req.body)\n    .then((comment) => {\n        const message = {\n            type:\"create\",\n            objectType: \"Comment\",\n            data:comment,\n            user:req.user.id,\n        }\n        socketManager.sendMessage(message);\n        res.json(comment);\n    })\n    .catch((err) => {\n        debug(err);\n        res.status(400).json(err);\n    });\n});\n\nrouter.put('/comment/:id', (req,res) => {\n    debug(`Updating Comment with id ${req.params.id}`);\n\n    const changedOn = parseInt(moment().format(\"YYYYMMDDHHmmss\"));\n    req.body[\"changedOn\"] = changedOn;\n    debug(req.body);\n    Comment.update(req.body,\n    {\n        where: {id: req.params.id}\n    }).then((comment) => {\n        const message = {\n            type:\"update\",\n            objectType: \"Comment\",\n            data:comment,\n            user:req.user.id,\n        }\n        socketManager.sendMessage(message);\n\n        res.json(comment);\n    })\n    .catch((err) => {\n        debug(err);\n        res.status(400).json(err);\n    });\n});\n\nrouter.delete('/comment/:id', (req,res) => {\n    debug(`Deleting Comment with id ${req.params.id}`);\n    // find the comment first\n    Comment.findOne({\n        where: {\n            id: req.params.id\n        }\n    })\n    .then ((comment) => {\n        Comment.destroy({\n            where: {id: comment.id}\n        }).then((result) => {\n            const message = {\n                type:\"delete\",\n                objectType: \"Comment\",\n                data:comment,\n                user:req.user.id,\n            }\n            socketManager.sendMessage(message);\n            res.json({result:true});\n        })\n        .catch((err) => {\n            debug(err);\n            res.status(400).json(err);\n        });\n\n    })\n    .catch((err) => {\n        debug(err);\n        res.status(400).json(err);\n    });\n\n\n});\n\n/*\n  Tech Blog entries API - CRUD\n*/\nrouter.get('/blog', (req,res) => {\n    debug('Getting all blog entries, their creators and any comments');\n\n    BlogEntry.findAll({\n        include: [User, Comment],\n        order: ['id','changedOn']\n    })\n        .then((blog) => {\n            res.json(blog);\n        })\n        .catch((err) => {\n            debug(err);\n            res.status(400).json(err);\n        });\n});\n\nrouter.post('/blog', (req,res) => {\n    debug('Creating a blog entry');\n\n\n    debug(req.body);\n    const changedOn = parseInt(moment().format(\"YYYYMMDDHHmmss\"));\n    req.body[\"changedOn\"] = changedOn;\n    BlogEntry.create(req.body)\n        .then((blog) => {\n            debug(`Created new blog entry with id ${blog.id} need full object now`);\n            BlogEntry.findOne({\n                include: [User, Comment],\n                where: {\n                    id: blog.id\n                }\n            })\n            .then((blog) => {\n                const message = {\n                    type:\"create\",\n                    objectType: \"BlogEntry\",\n                    data:blog,\n                    user:req.user.id,\n                }\n                socketManager.sendMessage(message);\n                res.json(blog);\n            })\n            .catch((err) => {\n                debug(err);\n                res.status(400).json(err);\n            });\n        })\n        .catch((err) => {\n            debug(err);\n            res.status(400).json(err);\n        });\n});\n\nrouter.put('/blog/:id', (req,res) => {\n    debug(`Updating blog entry with id ${req.params.id}`);\n\n    debug(req.body);\n    const changedOn = parseInt(moment().format(\"YYYYMMDDHHmmss\"));\n    req.body[\"changedOn\"] = changedOn;\n    BlogEntry.update(req.body,\n        {\n            where: {id: req.params.id}\n        })\n        .then((blog) => {\n            debug(`Updated new blog entry with id ${blog.id} need full object now`);\n            BlogEntry.findOne({\n                include: [User, Comment],\n                where: {\n                    id: req.params.id\n                }\n            })\n                .then((blog) => {\n                    const message = {\n                        type:\"update\",\n                        objectType: \"BlogEntry\",\n                        data:blog,\n                        user:req.user.id,\n                    }\n                    socketManager.sendMessage(message);\n                    res.json(blog);\n                })\n                .catch((err) => {\n                    debug(err);\n                    res.status(400).json(err);\n                });\n        })\n        .catch((err) => {\n            debug(err);\n            res.status(400).json(err);\n        });\n});\n\nrouter.delete('/blog/:id', (req,res) => {\n    debug(`Deleting blog entry with id ${req.params.id}`);\n    BlogEntry.destroy({\n        where: {id: req.params.id}\n    })\n        .then((result) => {\n            const message = {\n                type:\"delete\",\n                objectType: \"BlogEntry\",\n                data:{ id: parseInt(req.params.id) },\n                user:req.user.id,\n            }\n            socketManager.sendMessage(message);\n            res.json({result:true});\n         })\n        .catch((err) => {\n            debug(err);\n            res.status(400).json(err);\n        });\n});\n\n/*\n  User entries API - Read only, for ids and names\n*/\nrouter.get('/users', (req,res) => {\n    debug('Getting all user entries');\n    User.findAll({attributes: ['id','username']})\n        .then((users) => {\n            // be sure to include its associated Products\n            res.json(users);\n        })\n        .catch((err) => {\n            debug(err);\n            res.status(400).json(err);\n        });\n});\n\nmodule.exports = router;","module.exports = {\n  ensureAuthenticated: (req, res, next) => {\n    if (req.isAuthenticated()) {\n      return next();\n    }\n    res.redirect('/login');\n  },\n  forwardAuthenticated: (req, res, next) => {\n    if (!req.isAuthenticated()) {\n      return next();\n    }\n    res.redirect('/');\n  },\n};\n","const express = require('express');\nconst passport = require('passport');\nconst User = require('../models/user');\nconst debug = require('debug')('route');\nconst setupPassport = require('../passport/passport');\n\nsetupPassport(passport,User);\n\nconst router = express.Router();\nconst auth = require('./auth');\n\n/* GET home page. */\nrouter.get('/', (req, res, next) => {\n  res.render('index', { user: req.user });\n});\n\nrouter.get('/dashboard', auth.ensureAuthenticated, (req, res, next) => {\n  res.render('index', { user: req.user });\n});\n\nrouter.get('/register', (req, res) => {\n  res.render('register', { layout:\"login-register\",user: req.user, error: req.flash()[\"error\"]});\n});\n\nrouter.post('/register', passport.authenticate('local-register', {\n  successRedirect: '/',\n  failureRedirect: '/register',\n  failureFlash: true\n}));\n\n\nrouter.get('/login', (req, res) => {\n  res.render('login', { layout:\"login-register\",user: req.user, error: req.flash()[\"error\"]});\n});\n\nrouter.post('/login', passport.authenticate('local-login', {\n  successRedirect: '/dashboard',\n  failureRedirect: '/login',\n  failureFlash: true\n}));\n\nrouter.get('/logout', (req, res) => {\n  req.session.destroy((err) => {\n    res.redirect('/');\n  });\n});\n\nrouter.get('/ping', (req, res) => {\n  res.status(200).send('pong!');\n});\n\n\nrouter.get('/test', (req, res) => {\n  console.log(`url: ${req.url}`);\n  res.send('Hello World');\n});\n\nmodule.exports = router;\n","//const socketDebug = require('debug')('socket');\n//const {Server} = require(\"socket.io\");\nimport debug = require('debug');\nimport {Server}  from 'socket.io';\nimport {Server as httpServer} from 'http';\n\nconst socketDebug = debug('socket');\n\nclass SocketManager {\n    protected io:Server|null;\n\n    constructor () {\n        this.io = null;\n    }\n\n    public connectToServer(httpServer:httpServer):void {\n        socketDebug('Connecting up to the HTTP server');\n        this.io = new Server(httpServer);\n    }\n\n    public listen():void {\n        socketDebug('starting to listen for connections');\n        if (this.io) this.io.on('connection', (socket) => {\n            socketDebug('Sockets: a user connected');\n            socket.on('disconnect', () => {\n                socketDebug('Sockets: user disconnected');\n            });\n            socket.on('message', (msg) => {\n                socketDebug(\"Sockets: Received message \" + msg);\n                if (this.io) this.io.emit('message', msg);\n                socketDebug(\"Sockets: Sending message \" + msg);\n            });\n        });\n    }\n\n    public sendMessage(message:any):void {\n        socketDebug(\"Sending data \" + message);\n        if (this.io) this.io.emit('data', JSON.stringify(message));\n    }\n}\n\nlet socketManager = new SocketManager();\n\n//module.exports = socketManager;\nexport = socketManager;","module.exports = require(\"bcrypt-nodejs\");","module.exports = require(\"body-parser\");","module.exports = require(\"connect-flash\");","module.exports = require(\"connect-session-sequelize\");","module.exports = require(\"cookie-parser\");","module.exports = require(\"debug\");","module.exports = require(\"dotenv\");","module.exports = require(\"express\");","module.exports = require(\"express-handlebars\");","module.exports = require(\"express-session\");","module.exports = require(\"http\");","module.exports = require(\"http-errors\");","module.exports = require(\"moment\");","module.exports = require(\"morgan\");","module.exports = require(\"passport\");","module.exports = require(\"passport-local\");","module.exports = require(\"path\");","module.exports = require(\"sequelize\");","module.exports = require(\"serve-favicon\");","module.exports = require(\"socket.io\");","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// Configuration and Logging handlers\nconst dotenv = require('dotenv').config();\nconst morgan = require('morgan');\nconst debug = require('debug')('server');\nconst socketDebug = require('debug')('socket');\n\n// HTTP handlers\nconst createError = require('http-errors');\nconst http = require('http');\nconst path = require('path');\nconst favicon = require('serve-favicon');\n\n// Express framework and additional middleware\nconst express = require('express');\nconst expressHandlebars = require('express-handlebars');\nconst bodyParser = require('body-parser');\nconst session = require('express-session');\nconst SequelizeStore = require('connect-session-sequelize')(session.Store);\nconst cookieParser = require('cookie-parser');\nconst connectFlash = require('connect-flash');\n\n// Sockets\nconst socketManager = require('./util/SocketManager');\n\n\n// Authentication middleware\nconst passport = require('passport');\n\nconst isDevelopment = (process.env.MODE === 'Development');\ndebug(`Is development mode ${isDevelopment}`);\n\n// Create and configure the express app\nconst app = express();\n\n// Express view/template engine setup\ndebug('setting up templating engine');\napp.set('views', path.join(`${__dirname}/../`, 'views'));\napp.engine('handlebars', expressHandlebars({\n    defaultLayout: 'default',\n    partialsDir: path.join(app.get('views'), 'partials'),\n    layoutDir: path.join(app.get('views'), 'layouts'),\n}));\n\ndebug('setting up templating engine - handlebars');\napp.set('view engine', 'handlebars');\napp.set('view cache', !isDevelopment); // view caching in production\n\ndebug('Installing middlewares');\n\ndebug('Sequelizing database');\n// load models\nconst sequelize = require('./db/connection');\nconst {User,BlogEntry,Comment} = require('./models');\n//Sync Database\nsequelize.sync().then(function () {\n    debug('Database sync successful');\n}).catch(function (err) {\n    debug(err, \"Something went wrong with the Database Update!\");\n});\n\n// Express middlewares\napp.use('/', express.static('./public')); // root directory of static content\napp.use('/dist', express.static('./dist')); // root directory of static content\napp.use(cookieParser()); // add cookie support\napp.use(bodyParser.json()); // add POST JSON support\napp.use(bodyParser.urlencoded({extended: true})); // and POST URL Encoded form support\n\n// const sessionStore = new SequelizeStore({\n//     db: sequelize,\n// });\n\napp.use(session({\n    secret: 'frankie',\n    resave: true,\n    cookie: {\n        maxAge: 30*60*1000,\n    },\n    //store: sessionStore,\n    proxy: true,\n}));\n\n//sessionStore.sync();// Add session support\n\napp.use(connectFlash()); // flash messages\napp.use(passport.initialize()); // initialise the authentication\napp.use(passport.session({})); // setup authentication to use cookie/sessions\n\n\n/* Are we in Development or in Production? */\ndebug('Setting up server side logging with Morgan');\nif (isDevelopment) {\n    app.use(morgan('dev')); /* log server calls with performance timing with development details */\n\n    /* log call requests with body */\n    app.use((request, response, next) => {\n        console.log(`Received request for ${request.url} with/without body`);\n        if (request.body) console.log(request.body);\n        next();\n    });\n} else {\n    app.use(morgan('combined')); /* log server calls per standard combined Apache combined format */\n}\n\n// ensure the user is logged in with a path\n\ndebug('Installing routes');\nconst routes = require('./routes/index.js');\n// add the middleware path routing\napp.use('/', routes); // add the routes to the express middleware\n// add the api path routing\nconst apiRoutes = require('./routes/api');\napp.use('/api',apiRoutes);\n\n// Setup authentication\ndebug('Setting up User model and authentication with Passport');\n//load passport strategies\nrequire('./passport/passport.ts')(passport, User);\n\n// route for the env.js file being served to the client\ndebug('Setting the environment variables for the browser to access');\nconst port = process.env.PORT || 3000;\nconst LOCAL_HOST_API_DEVELOPMENT = `http://localhost:${port}/api`;\nconst LOCAL_HOST_API_PRODUCTION = `https://localhost:${port}/api`;\nlet localhostAPIURL = LOCAL_HOST_API_DEVELOPMENT;\nif (!isDevelopment) localhostAPIURL = LOCAL_HOST_API_PRODUCTION;\nconst API_SERVER_URL = process.env.API_SERVER_URL || localhostAPIURL;\nconst env = {serverURL: API_SERVER_URL};\n\napp.get('/js/env.js', (req, res) => {\n    let session = req.session;\n    if (session.id) {\n        env[\"id\"] = session.id;\n    }\n    res.send(`window.ENV = ${JSON.stringify(env)}`);\n});\n\n\n// catch 404 and forward to error handler\ndebug('Setting up 404 handler');\napp.use((req, res, next) => {\n    debug('404 forwarder');\n    const err = new Error('Not Found');\n    err.status = 404;\n    next(err);\n});\n\n// error handler\nif (isDevelopment) {\n    debug('Setting up DEV 500 handler');\n    app.use((err, req, res, next) => {\n        debug(err);\n        res.status(err.status || 500);\n        res.render('error', {\n            message: err.message,\n            error: err,\n        });\n    });\n} else {\n    debug('Production 500 handler');\n    app.use((err, req, res, next) => {\n        debug(err);\n        res.status(err.status || 500);\n        res.render('error', {\n            message: err.message,\n            error: {},\n        });\n    });\n}\n\nconst httpServer = http.Server(app);\n// setup the sockets manager with the server\nsocketManager.connectToServer(httpServer);\n//const io = new Server(httpServer);\n\n//io.on('connection', (socket) => {\n//    console.log('----A USER CONNECTED-----');\n//});\n\nhttpServer.listen(port, () => {\n    debug(`Server started on port ${port}`);\n    // start listening for socket events\n    socketManager.listen();\n    // socketDebug(\"starting socket listener\");\n    // io.on('connection', (socket) => {\n    //     socketDebug('Sockets: a user connected');\n    //     socket.on('disconnect', () => {\n    //         socketDebug('Sockets: user disconnected');\n    //     });\n    //     socket.on('chat message', (msg) => {\n    //         socketDebug(\"Sockets: Received message \" + msg);\n    //         io.emit('chat message', msg);\n    //         socketDebug(\"Sockets: Sending message \" + msg);\n    //     });\n//    });\n});\n\n"],"names":[],"sourceRoot":""}